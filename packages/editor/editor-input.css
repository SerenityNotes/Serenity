@tailwind base;
@tailwind components;
@tailwind utilities;

/* Classes included via @layer will only be in the compiled CSS if we use them in code */
@layer base {
  /*
    + use of opacity possible
  */
  ::selection {
    @apply bg-primary-400/50;
  }

  /* spacing calculatable via * + * ?? */
  h1 {
    @apply mt-12 mb-3 text-3xl font-bold;
  }
  h2 {
    @apply mt-10 mb-2 text-2xl font-bold;
  }
  h3 {
    @apply mt-6 mb-1.5 text-xl font-bold;
  }
  /* fixed leading needed for tasklist-icon alignment  */
  p {
    @apply text-mobile leading-6 sm:text-base;
  }
  * + p {
    @apply mt-2;
  }
  a {
    @apply text-primary-500 underline;
  }

  /* --- editor --- */
  .ProseMirror {
    @apply h-full px-4 py-10 xs:px-6 sm:px-10 md:py-14 lg:px-16;
  }

  /* needed to make all area of the editor clickable which enables activating the cursor on each written line */
  .ProseMirror > * {
    @apply mx-auto w-full max-w-prose-rem;
  }

  /* --- placeholder --- */
  .ProseMirror *.is-editor-empty:first-child::before {
    color: theme("colors.gray.400");
    content: attr(data-placeholder);
    float: left;
    height: 0;
    pointer-events: none;
  }
}

@layer components {
  blockquote {
    @apply my-4 border-l-4 border-solid border-primary-400 pl-4;
  }

  /* --- code --- */

  /* used for inline- and blockcode */
  code {
    @apply text-sm text-gray-800;
  }

  .code-extension {
    /* using pt-1/pb-0.5 so that code elements in adjacent lines don't overlap and the Text still looks centered */
    @apply rounded bg-gray-200 px-1.5 pt-1 pb-0.5;
  }

  .code-block-extension {
    @apply my-4 rounded bg-gray-100 p-4;
  }

  /* --- lists --- */
  ol,
  ul {
    @apply my-4;
  }
  ol,
  ul:not(.task-list-extension) {
    @apply pl-4.5;
  }
  ol li,
  ul:not(.task-list-extension) li {
    /* to align text-indent of blockelements (list, quote, codeblock) */
    @apply pl-0.5;
  }
  /* avoid jumping when initializing a list before any other element */
  li + li {
    @apply mt-2;
  }
  ol {
    @apply list-decimal;
  }
  ul:not(.task-list-extension) {
    @apply list-disc;
  }

  /* --- taskList --- */
  .task-item-extension {
    @apply flex;
    position: relative;
  }
  .task-item-extension label {
    margin-top: 0.25rem;
    height: 1rem;
  }
  .task-item-extension label + div {
    padding-left: 0.5rem;
    flex-grow: 1;
  }
  .task-item-extension input[type="checkbox"] {
    opacity: 0;
    position: absolute;
  }

  /* - css checkbox - */
  .task-item-extension input + span {
    position: relative;
    display: block;
    height: 1rem;
    /* fixed width needed for absolute positioning of children */
    width: 1rem;
  }
  .task-item-extension input + span:before,
  .task-item-extension input + span:after {
    content: "";
    position: absolute;
    display: inline-block;
  }
  .task-item-extension input + span:before {
    width: 1rem;
    height: 1rem;
    border: 0.125rem solid theme("colors.gray.600");
    border-radius: 0.125rem;
  }

  /* - css checkbox : checked - */
  .task-item-extension input:checked + span:before {
    border-color: theme("colors.primary.400");
    background-color: theme("colors.primary.400");
  }
  .task-item-extension input:checked + span:after {
    top: 0.25rem;
    left: 0.125rem;
    width: 0.75rem;
    height: 0.375rem;
    border-left: 0.125rem solid white;
    border-bottom: 0.125rem solid white;
    transform: rotate(-45deg);
  }
  .task-item-extension[data-checked="true"] p {
    text-decoration: line-through;
    color: theme("colors.gray.600");
  }
}

/* ::selection {
  background-color: theme('colors.primary.400');
} */

/* This will always be included in our compiled CSS */
.ProseMirror:focus {
  outline: none;
}

/* --- ????????????? --- */
/* should we work with a custom wrapper class or just use the ProseMirror as editor wrapper entry */
.ProseMirror > *:first-child {
  margin-top: 0;
}

/* generate debug class to show this */
/* ------------------------- */
/* TODO remove after testing */
/* ------------------------- */
h1,
h2,
h3 {
  /* background-color: rgba(109, 30, 255, 0.15); */
}
p {
  /* background-color: rgba(109, 30, 255, 0.05); */
}
.ProseMirror {
  /* background-color: rgba(255, 230, 147, 0.5); */
}
